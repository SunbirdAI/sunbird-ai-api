# Sunbird AI Dashboard Integration

This directory contains the React frontend for the Sunbird AI API dashboard.

## 1. Setup and Build Frontend

1.  Navigate to the `frontend` directory:
    ```bash
    cd frontend
    ```

2.  Install dependencies:
    ```bash
    npm install
    ```

3.  Build the application:
    ```bash
    npm run build
    ```
    This will output the build files to `../app/static/react_build`.

## 2. Integrate with FastAPI

To serve the React application from FastAPI, you need to modify `app/api.py`.

### Step 1: Mount Static Assets
Add the following to `app/api.py` to serve the static assets (JS/CSS) generated by Vite.

```python
from fastapi.staticfiles import StaticFiles
from pathlib import Path

# ... existing imports ...

# Ensure this is after app creation
static_files_directory = Path(__file__).parent.absolute() / "static"

# Mount the React build assets
# Vite outputs assets to app/static/react_build/assets
# We mount this to /assets so the browser can find them
react_build_dir = static_files_directory / "react_build"
assets_dir = react_build_dir / "assets"

if assets_dir.exists():
    app.mount("/assets", StaticFiles(directory=assets_dir), name="assets")
```

### Step 2: Include SPA Router
Replace the existing `frontend_router` with the new SPA router that serves `index.html`.

```python
# Import the new router
from app.routers.spa import router as spa_router

# ... existing code ...

# Remove or comment out the old frontend router
# app.include_router(frontend_router, prefix="", tags=["Frontend Routes"])

# Add the SPA router LAST (so it acts as a catch-all)
app.include_router(spa_router, prefix="", tags=["Dashboard"])
```

## 3. Development

For development, you can run the React app separately:

```bash
cd frontend
npm run dev
```

This will start a dev server at `http://localhost:5173`. You may need to configure CORS in FastAPI or use a proxy in `vite.config.ts` to talk to the backend.

## Project Structure

- `frontend/`: React application source code.
- `frontend/src/pages/`: Page components (Dashboard, Usage, Keys, etc.).
- `frontend/src/components/`: Reusable components (Layout, etc.).
- `frontend/src/context/`: React Context for Auth and Theme.
- `app/routers/spa.py`: FastAPI router to serve the React app.
